<!DOCTYPE html>
<html>
<head>
<title>autoTurnManage.html</title>

<meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
<meta http-equiv="description" content="this is my page">
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<link href="resources/bootstrap/css/bootstrap.css" rel="stylesheet"
	media="screen">
<script type="text/javascript" src="resources/js/jquery-1.9.1.js"></script>
<script src="resources/bootstrap/js/bootstrap.min.js"
	type="text/javascript"></script>
<script src="resources/js/dropzone.js" type="text/javascript"></script>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<link href="resources/css/dataManageTree/zzsc.css" rel="stylesheet"
	type="text/css" />
<script src="resources/js/dataManageTree/showlist.js"
	type="text/javascript"></script>



<style type="text/css">
.my {
	float: right;
}

.mynav>li.active>a,.mynav>li.active>a:hover,.mynav>li.active>a:focus {
	background-color: #08c;
	color: white;
}

.mynav {
	margin-left: 20px;
}

.section_header p {
	padding: 0px;
	margin: 0px;
	color: #000;
}

.section_header {
	padding: 0;
	padding-bottom: 5px;
	margin-bottom: 20px;
	font-size: 21px;
	line-height: 40px;
	color: #333;
	border: 0;
	border-bottom: 1px solid #06C;
}
</style>
</head>

<body>
	<div class="section_header">
		<div class="btn-group pull-right">
			<button class="btn add" data-loading-text="正在添加">添加</button>
			<button class="btn refresh btn-primary" data-loading-text="正在刷新">刷新</button>
		</div>
		<p id="autoManageTitle">首页轮转图管理</p>
	</div>

	<div class="pagination">
		<ul>
			<li class="next la"><a href="#">&laquo;</a></li>
			<li class="first"><a href="#">1</a></li>
			<li class="next ra"><a href="#">&raquo;</a></li>
		</ul>
	</div>
	<table class="table table-striped">
		<thead>
			<tr>
				<th>id</th>
				<th>组名</th>
				<th>图片链接1</th>
				<th>图片链接2</th>
				<th>图片链接3</th>
				<th>操作</th>
			</tr>
		</thead>
		<tbody>
			<tr class="hide temple">
				<td class="id" style="padding-top:12px">1</td>
				<td class="group" style="padding-top:12px">1</td>
				<td class="desc1"><a class="btn btn-link descURL1">查看</a></td>
				<td class="desc2"><a class="btn btn-link descURL2">查看</a></td>
				<td class="desc3"><a class="btn btn-link descURL3">查看</a></td>
				<td class="oper"><button class="btn btn-primary">操作</button>
				</td>
			</tr>
		</tbody>
	</table>
	<div class="modal hide fade show">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal"
				aria-hidden="true">&times;</button>
			<h3>图片内容</h3>
		</div>
		<div class="modal-body" >
			<img alt="" src="" style = "width:300px;height:300px;clear: both;display: block;margin:auto;">
			<p style = "font-weight:bold;margin_top:20px"></p>
			
		</div>
	</div>
	<div class="modal hide fade oper">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal"
				aria-hidden="true">&times;</button>
			<h3>操作</h3>
		</div>
		<div class="modal-body">
			<a href="#" class="btn btn-danger">删除</a> <a href="#"
				class="btn btn-primary change">修改</a> <a href="#"
				class="btn btn-primary reupload hide">重新上传</a>
			<form class="form-horizontal hide" style="margin-top:10px">
				<div class="control-group">
					<label class="control-label" for="inputEmail">活动类型</label>
					<div class="controls type">
						<input type="text" id="inputEmail" placeholder="type">
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" for="inputEmail">活动描述</label>
					<div class="controls">
						<a class="btn btn-link desc" style="padding-left:0px">点此上传</a> <a
							class="btn btn-link hide temple"
							style="padding-left:0px;
					      color:rgb(51,51,51);
					      cursor:deault;
					      text-decoration:none;
					      "></a>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" for="inputEmail">活动图片</label>
					<div class="controls">
						<a class="btn btn-link activity" style="padding-left:0px">点此上传</a>
						<a class="btn btn-link hide temple"
							style="padding-left:0px;
					      color:rgb(51,51,51);
					      cursor:deault;
					      text-decoration:none;
					      "></a>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" for="inputEmail">得分</label>
					<div class="controls score">
						<input type="text" id="" placeholder="score">
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" for="inputPassword">积分</label>
					<div class="controls credit">
						<input type="text" id="" placeholder="credit">
					</div>
				</div>
			</form>
		</div>
		<div class="modal-footer">
			<a href="#" class="btn">关闭</a> <a href="#"
				class="btn btn-primary save">Save changes</a>
		</div>
	</div>
	<div class="modal hide fade add">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal"
				aria-hidden="true">&times;</button>
			<h3>操作</h3>
		</div>
		<div class="modal-body">
			<form class="form-horizontal">
				<div class="control-group">
					<label class="control-label" for="inputEmail">活动类型</label>
					<div class="controls type">
						<input type="text" id="inputEmail" placeholder="type">
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" for="inputEmail">活动描述</label>
					<div class="controls">
						<a class="btn btn-link" style="padding-left:0px">点此上传</a>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" for="inputEmail">活动图片</label>
					<div class="controls">
						<a class="btn btn-link" style="padding-left:0px">点此上传</a>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" for="inputEmail">得分</label>
					<div class="controls score">
						<input type="text" id="" placeholder="score">
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" for="inputPassword">积分</label>
					<div class="controls credit">
						<input type="text" id="" placeholder="credit">
					</div>
				</div>
			</form>
		</div>
		<div class="modal-footer">
			<a href="#" class="btn">关闭</a> <a href="#"
				class="btn btn-primary save">Save changes</a>
		</div>
	</div>
	<div id="upload" style="display:none"></div>
	<form id="pictures">
		<input class="uploaddesc" type="file" name="pics" /> <input
			class="uploadactivity" type="file" name="pics" />
	</form>
</body>
<script>
	$(function() {
		/**	活动页面的js **/
		$.ajax({
			url : "getCarouselInfo.action",
			type : "POST",
			data : {},
			success : function(data) {
				var data_tmp = JSON.parse(data);
				var arr_tmp = data_tmp["carousels"];
				/** 如果大于1那么默认会每次点击清空table信息，保留第一行隐藏行用于clone方法 **/
				if ($("table").find("tr").length > 1) {
					$("table tr:gt(0):not(:eq(0))").remove();
				}
				var windowLocation = window.location.href;
				var windowLocation_Final = windowLocation.substring(0, windowLocation.length-21);
				var lineCount = 1;
				for ( var i = 0; i < arr_tmp.length; i++) {

					var $tr = $("table").find("tr.temple").clone();
					$tr.removeClass("hide");
					$tr.removeClass("temple");
					$tr.find(".id").text((lineCount) + "");
					$tr.find(".group").data("data", (lineCount) + "");
					for ( var j = 1; j < 4; j++) {
						/**  绑定目标url点击事件 **/
						$tr.find(".desc"+j).data("data", arr_tmp[i]["image" + j + "Url"]);
						$tr.find("a.descURL" + j).bind(
								"click",
								function() {
							
									var $tmp = $(this).parent();
									$(".modal.show").find(".modal-body").find(
											"p").text("存放位置："+windowLocation_Final +$tmp.data("data"));
									$(".modal.show").find(".modal-body").find(
											"img").attr("src",windowLocation_Final + $tmp.data("data"));
									$(".modal.show").modal("show");
								});
						lineCount++;
					}
					$tr.find(".oper").bind(
							"click",
							function() {
								$(".modal.oper").data("data",
										$(this).parent().data("data"));
								$(".modal.oper").modal("show");
								$(".mynav").data("data", $(".modal.oper"));
							});
					$tr.appendTo($("table"));

				}
			}
		});
	});
</script>
</html>
